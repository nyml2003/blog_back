"use strict";(globalThis["webpackChunkventus"]=globalThis["webpackChunkventus"]||[]).push([[3855],{3855:(e,a,t)=>{t.r(a),t.d(a,{default:()=>A});t(5954);var l=t(6929),u=t(80),s=t(9482),n=t(7218),i=t(8455),o=t(1378),r=t(9724),c=t(1944);const d={class:"row"},m={class:"col text-right text-caption text-white"},v=["src"],p={class:"q-ma-md text-h5 text-weight-bolder text-right"},h={class:"text-subtitle2 q-my-md"},g={class:"row"},w={class:"row"},_={class:"row"},f={__name:"ProfileMobileInfo",setup(e){(0,c.Z)(),(0,i.tv)(),(0,n.iH)(["温馨提示，邮箱、电话、用户唯一标识均可用于登录",""]);const a=(0,n.iH)([{name:"评论总数",value:0,field:"comment_count"},{name:"发送敏感请求总数",value:0,field:"request_count"}]),t=()=>{s.userApi.get("/user/self/").then((e=>{W.value.nickname=e.data.nickname,W.value.email=e.data.email,W.value.avatar=e.data.avatar,W.value.id=e.data.id,W.value.created_at=new Date(e.data.created_at).toLocaleString("zh-CN",{hour12:!1}),W.value.description=e.data.description,W.value.telephone=e.data.telephone,W.value.username=e.data.username})).catch((e=>{console.log(e)})),s.userApi.get("/comment/user/").then((e=>{f.value=e.data,f.value.forEach((e=>{e.updated_at=new Date(e.updated_at).toLocaleString("zh-CN",{hour12:!1})})),f.value.forEach((e=>{e.isUpdate=!1}))})),s.userApi.get("/user/statistics/comment/").then((e=>{a.value[0].value=e.data.count})),s.userApi.get("/user/statistics/database_request/").then((e=>{a.value[1].value=e.data.count}))},f=(0,n.iH)([]);(0,l.bv)((()=>{t()}));const W=(0,n.iH)({id:0,nickname:"",email:"",avatar:null,description:"",telephone:null,username:"",created_at:""}),b=(0,n.iH)(!1),q=(0,n.iH)(!1);return(e,a)=>{const s=(0,l.up)("q-dialog"),n=(0,l.up)("q-icon"),i=(0,l.up)("q-card-section"),c=(0,l.up)("q-avatar"),f=(0,l.up)("q-separator"),k=(0,l.up)("q-btn"),x=(0,l.up)("q-card-actions"),Z=(0,l.up)("q-card"),y=(0,l.up)("q-page");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(s,{modelValue:b.value,"onUpdate:modelValue":a[0]||(a[0]=e=>b.value=e),persistent:"","full-height":""},{default:(0,l.w5)((()=>[(0,l.Wm)(o.Z,{isOpen:b.value,close:()=>{b.value=!1,t()}},null,8,["isOpen","close"])])),_:1},8,["modelValue"]),(0,l.Wm)(s,{modelValue:q.value,"onUpdate:modelValue":a[1]||(a[1]=e=>q.value=e),persistent:""},{default:(0,l.w5)((()=>[(0,l.Wm)(r.Z,{isOpen:q.value,close:()=>{q.value=!1,t()}},null,8,["isOpen","close"])])),_:1},8,["modelValue"]),(0,l.Wm)(y,{class:"flex items-start content-start justify-center"},{default:(0,l.w5)((()=>[(0,l.Wm)(Z,{class:"q-mx-md q-mt-md q-mb-sm",style:{width:"100vw"}},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{tag:"div",style:{height:"132px"},class:"bg-grey"},{default:(0,l.w5)((()=>[(0,l._)("div",d,[(0,l._)("div",m,[(0,l.Wm)(n,{name:"calendar_today"}),(0,l.Uk)(" 温馨提示，邮箱、电话、用户唯一标识均可用于登录 ")])])])),_:1}),(0,l.Wm)(c,{class:"absolute-center",size:"120px",style:{left:"25%","border-radius":"50%",top:"calc(132px)"}},{default:(0,l.w5)((()=>[(0,l._)("img",{src:W.value.avatar},null,8,v)])),_:1}),(0,l._)("div",p,(0,u.zw)(W.value.nickname),1),(0,l.Wm)(f),(0,l.Wm)(i,{tag:"div",style:{height:"calc(100vh - 350px)","overflow-y":"auto"}},{default:(0,l.w5)((()=>[(0,l._)("div",h,(0,u.zw)(W.value.description),1),(0,l._)("div",g,[(0,l.Wm)(n,{name:"email"}),(0,l.Uk)(" 邮箱: "+(0,u.zw)(W.value.email),1)]),(0,l._)("div",w,[(0,l.Wm)(n,{name:"phone"}),(0,l.Uk)(" 电话: "+(0,u.zw)(W.value.telephone),1)]),(0,l._)("div",_,[(0,l.Wm)(n,{name:"description"}),(0,l.Uk)(" 用户唯一标识: "+(0,u.zw)(W.value.username),1)])])),_:1}),(0,l.Wm)(x,{align:"right"},{default:(0,l.w5)((()=>[(0,l.Wm)(k,{flat:"",label:"修改密码",color:"red",onClick:a[2]||(a[2]=e=>q.value=!0)}),(0,l.Wm)(k,{flat:"",label:"编辑个人资料",color:"primary",onClick:a[3]||(a[3]=e=>b.value=!0)})])),_:1})])),_:1})])),_:1})],64)}}};var W=t(128),b=t(7959),q=t(6786),k=t(7392),x=t(1909),Z=t(4743),y=t(4348),C=t(1789),Q=t(5779),z=t(9332),H=t.n(z);const U=f,A=U;H()(f,"components",{QDialog:W.Z,QPage:b.Z,QCard:q.Z,QCardSection:k.Z,QIcon:x.Z,QAvatar:Z.Z,QSeparator:y.Z,QCardActions:C.Z,QBtn:Q.Z})}}]);