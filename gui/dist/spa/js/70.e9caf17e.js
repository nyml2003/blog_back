"use strict";(globalThis["webpackChunkventus"]=globalThis["webpackChunkventus"]||[]).push([[70],{6453:(e,a,l)=>{l.d(a,{Z:()=>s});l(5954);var t=l(6929),i=l(7218),n=l(8532),o=l(859),r=l(8192),u=l(7623);const s=(0,o.L)({name:"QHeader",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,revealOffset:{type:Number,default:250},bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(e,{slots:a,emit:l}){const{proxy:{$q:o}}=(0,t.FN)(),s=(0,t.f3)(u.YE,u.qO);if(s===u.qO)return console.error("QHeader needs to be child of QLayout"),u.qO;const c=(0,i.iH)(parseInt(e.heightHint,10)),d=(0,i.iH)(!0),g=(0,t.Fl)((()=>!0===e.reveal||s.view.value.indexOf("H")>-1||o.platform.is.ios&&!0===s.isContainer.value)),v=(0,t.Fl)((()=>{if(!0!==e.modelValue)return 0;if(!0===g.value)return!0===d.value?c.value:0;const a=c.value-s.scroll.value.position;return a>0?a:0})),p=(0,t.Fl)((()=>!0!==e.modelValue||!0===g.value&&!0!==d.value)),m=(0,t.Fl)((()=>!0===e.modelValue&&!0===p.value&&!0===e.reveal)),h=(0,t.Fl)((()=>"q-header q-layout__section--marginal "+(!0===g.value?"fixed":"absolute")+"-top"+(!0===e.bordered?" q-header--bordered":"")+(!0===p.value?" q-header--hidden":"")+(!0!==e.modelValue?" q-layout--prevent-focus":""))),f=(0,t.Fl)((()=>{const e=s.rows.value.top,a={};return"l"===e[0]&&!0===s.left.space&&(a[!0===o.lang.rtl?"right":"left"]=`${s.left.size}px`),"r"===e[2]&&!0===s.right.space&&(a[!0===o.lang.rtl?"left":"right"]=`${s.right.size}px`),a}));function b(e,a){s.update("header",e,a)}function w(e,a){e.value!==a&&(e.value=a)}function _({height:e}){w(c,e),b("size",e)}function y(e){!0===m.value&&w(d,!0),l("focusin",e)}(0,t.YP)((()=>e.modelValue),(e=>{b("space",e),w(d,!0),s.animate()})),(0,t.YP)(v,(e=>{b("offset",e)})),(0,t.YP)((()=>e.reveal),(a=>{!1===a&&w(d,e.modelValue)})),(0,t.YP)(d,(e=>{s.animate(),l("reveal",e)})),(0,t.YP)(s.scroll,(a=>{!0===e.reveal&&w(d,"up"===a.direction||a.position<=e.revealOffset||a.position-a.inflectionPoint<100)}));const q={};return s.instances.header=q,!0===e.modelValue&&b("size",c.value),b("space",e.modelValue),b("offset",v.value),(0,t.Jd)((()=>{s.instances.header===q&&(s.instances.header=void 0,b("size",0),b("offset",0),b("space",!1))})),()=>{const l=(0,r.Bl)(a.default,[]);return!0===e.elevated&&l.push((0,t.h)("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),l.push((0,t.h)(n.Z,{debounce:0,onResize:_})),(0,t.h)("header",{class:h.value,style:f.value,onFocusin:y},l)}}})},2322:(e,a,l)=>{l.d(a,{Z:()=>g});l(5954);var t=l(7218),i=l(6929),n=l(8689),o=l(3578);const r={ratio:[String,Number]};function u(e,a){return(0,i.Fl)((()=>{const l=Number(e.ratio||(void 0!==a?a.value:void 0));return!0!==isNaN(l)&&l>0?{paddingBottom:100/l+"%"}:null}))}var s=l(859),c=l(8192);const d=16/9,g=(0,s.L)({name:"QImg",props:{...r,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:d},placeholderSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:a,emit:l}){const r=(0,t.iH)(e.initialRatio),s=u(e,r);let d=null,g=!1;const v=[(0,t.iH)(null),(0,t.iH)(q())],p=(0,t.iH)(0),m=(0,t.iH)(!1),h=(0,t.iH)(!1),f=(0,i.Fl)((()=>`q-img q-img--${!0===e.noNativeMenu?"no-":""}menu`)),b=(0,i.Fl)((()=>({width:e.width,height:e.height}))),w=(0,i.Fl)((()=>"q-img__image "+(void 0!==e.imgClass?e.imgClass+" ":"")+`q-img__image--with${!0===e.noTransition?"out":""}-transition`)),_=(0,i.Fl)((()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position})));function y(){return e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null}function q(){return void 0!==e.placeholderSrc?{src:e.placeholderSrc}:null}function S(e){null!==d&&(clearTimeout(d),d=null),h.value=!1,null===e?(m.value=!1,v[1^p.value].value=q()):m.value=!0,v[p.value].value=e}function k({target:e}){!0!==g&&(null!==d&&(clearTimeout(d),d=null),r.value=0===e.naturalHeight?.5:e.naturalWidth/e.naturalHeight,x(e,1))}function x(e,a){!0!==g&&1e3!==a&&(!0===e.complete?W(e):d=setTimeout((()=>{d=null,x(e,a+1)}),50))}function W(e){!0!==g&&(p.value=1^p.value,v[p.value].value=null,m.value=!1,h.value=!1,l("load",e.currentSrc||e.src))}function Z(e){null!==d&&(clearTimeout(d),d=null),m.value=!1,h.value=!0,v[p.value].value=null,v[1^p.value].value=q(),l("error",e)}function Q(a){const l=v[a].value,t={key:"img_"+a,class:w.value,style:_.value,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,...l};return p.value===a?(t.class+=" q-img__image--waiting",Object.assign(t,{onLoad:k,onError:Z})):t.class+=" q-img__image--loaded",(0,i.h)("div",{class:"q-img__container absolute-full",key:"img"+a},(0,i.h)("img",t))}function H(){return!0!==m.value?(0,i.h)("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},(0,c.KR)(a[!0===h.value?"error":"default"])):(0,i.h)("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},void 0!==a.loading?a.loading():!0===e.noSpinner?void 0:[(0,i.h)(o.Z,{color:e.spinnerColor,size:e.spinnerSize})])}return(0,i.YP)((()=>y()),S),S(y()),(0,i.Jd)((()=>{g=!0,null!==d&&(clearTimeout(d),d=null)})),()=>{const a=[];return null!==s.value&&a.push((0,i.h)("div",{key:"filler",style:s.value})),!0!==h.value&&(null!==v[0].value&&a.push(Q(0)),null!==v[1].value&&a.push(Q(1))),a.push((0,i.h)(n.uT,{name:"q-transition--fade"},H)),(0,i.h)("div",{class:f.value,style:b.value,role:"img","aria-label":e.alt},a)}}})},9403:(e,a,l)=>{l.d(a,{Z:()=>o});var t=l(6929),i=l(859);const n=(0,t.h)("div",{class:"q-space"}),o=(0,i.L)({name:"QSpace",setup(){return()=>n}})},1944:(e,a,l)=>{l.d(a,{Z:()=>n});var t=l(6929),i=l(7623);function n(){return(0,t.f3)(i.Ng)}},7733:(e,a,l)=>{l.d(a,{v:()=>i});var t=l(8910);const i=(0,t.Q_)("MainLayoutStore",{state:()=>({isRightDrawerOpen:!1,id:null})})},70:(e,a,l)=>{l.r(a),l.d(a,{default:()=>Y});l(5954);var t=l(6929),i=l(8689),n=l(7218),o=l(80),r=l(1944),u=l(8455),s=l(7493),c=l(9482),d=l(7733);const g=e=>((0,t.dD)("data-v-0891f0eb"),e=e(),(0,t.Cn)(),e),v=g((()=>(0,t._)("div",{class:"q-mx-md"},null,-1))),p=g((()=>(0,t._)("div",{class:"text-red text-weight-bold"},"注销",-1))),m={class:"bg-transparent row justify-between",style:{height:"150px",width:"300px"}},h=["src"],f={class:"text-right q-ma-md"},b={class:"text-h6 text-weight-bold"},w={class:"text-subtitle2 q-mt-md"},_={__name:"MainLayoutDesktop",setup(e){const a=(0,d.v)(),l=(0,s.r)(),g=()=>{y.push("/login")},_=()=>{y.push("/"),l.logout(),l.isLogged=!1},y=(0,u.tv)(),q=(0,r.Z)(),S=()=>{l.checkLogged().then((e=>{"token valid"===e?(l.isLogged=!0,C()):(l.logout(),l.isLogged=!1)}))};(0,t.bv)((()=>{S()})),(0,t.YP)((()=>l.isLogged),(e=>{e&&C()}));const k=(0,n.iH)((0,t.Fl)((()=>l.isLogged))),x=(0,n.iH)((0,t.Fl)((()=>a.isRightDrawerOpen)));(0,t.JJ)("isLogged",k);const W=(0,n.iH)("");(0,t.JJ)("keyword",W);const Z=(0,n.iH)(""),Q=()=>{W.value=Z.value,Z.value="",z(),y.push({path:"/blog"})},H=(0,n.iH)(!0),z=()=>{H.value=!1,(0,t.Y3)((()=>{H.value=!0}))},C=()=>{c.userApi.get("/user/self/").then((e=>{console.log(e),L.value.username=e.data.username,L.value.avatar=e.data.avatar,L.value.description=e.data.description,L.value.nickname=e.data.nickname}))},L=(0,n.iH)({username:"",avatar:null,description:""}),F=()=>{k.value?a.isRightDrawerOpen=!a.isRightDrawerOpen:(q.notify({message:"请先登录",icon:"warning",color:"red",position:"top"}),g())},O=()=>{a.isRightDrawerOpen=!1,q.notify({message:"确定要退出登录吗？",color:"white",icon:"warning",textColor:"black",position:"center",actions:[{label:"取消",color:"black"},{label:"确定",color:"primary",handler:()=>{_()}}]})};return(e,l)=>{const r=(0,t.up)("q-route-tab"),u=(0,t.up)("q-tabs"),s=(0,t.up)("q-btn"),c=(0,t.up)("q-input"),d=(0,t.up)("q-space"),_=(0,t.up)("q-toolbar"),y=(0,t.up)("q-header"),q=(0,t.up)("q-icon"),S=(0,t.up)("q-item-section"),W=(0,t.up)("q-item"),z=(0,t.up)("q-list"),C=(0,t.up)("q-scroll-area"),R=(0,t.up)("q-avatar"),V=(0,t.up)("q-img"),T=(0,t.up)("q-drawer"),j=(0,t.up)("router-view"),B=(0,t.up)("q-page-container"),D=(0,t.up)("q-layout"),N=(0,t.Q2)("ripple");return(0,t.wg)(),(0,t.j4)(D,{view:"hHr LpR ffr",class:"non-selectable bg-grey-3"},{default:(0,t.w5)((()=>[(0,t.Wm)(y,{elevated:"",style:{"backdrop-filter":"blur(10px)"},class:"bg-transparent"},{default:(0,t.w5)((()=>[(0,t.Wm)(_,{class:"text-black justify-center"},{default:(0,t.w5)((()=>[(0,t.Wm)(u,{"inline-label":""},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{icon:"home",to:"/",exact:"",label:"简介"}),(0,t.Wm)(r,{icon:"group",to:"/friend",exact:"",label:"友链"}),(0,t.Wm)(r,{icon:"menu_book",to:"/blog",exact:"",label:"博文列表"}),(0,t.Wm)(r,{icon:"videogame_asset",to:"/game",exact:"",label:"游戏"})])),_:1}),v,(0,t.Wm)(c,{ref:"input",modelValue:Z.value,"onUpdate:modelValue":l[0]||(l[0]=e=>Z.value=e),color:"primary",dense:"",outlined:"",placeholder:"Search"},{prepend:(0,t.w5)((()=>[(0,t.Wm)(s,{round:"",icon:"search",color:"primary",onClick:Q,size:"sm"})])),_:1},8,["modelValue"]),(0,t.Wm)(d),(0,t.Wm)(i.uT,{name:"fade",mode:"out-in"},{default:(0,t.w5)((()=>[k.value?((0,t.wg)(),(0,t.j4)(s,{key:0,flat:"",icon:"account_circle",onClick:F,class:"q-ml-md",label:"帐号"})):((0,t.wg)(),(0,t.j4)(s,{key:1,flat:"",icon:"account_circle",onClick:g,class:"q-ml-md",label:"登录"}))])),_:1})])),_:1})])),_:1}),(0,t.Wm)(T,{modelValue:x.value,"onUpdate:modelValue":l[1]||(l[1]=e=>x.value=e),width:300,side:"right",elevated:"",onClickCapture:l[2]||(l[2]=()=>{(0,n.SU)(a).isRightDrawerOpen=!1}),bordered:"","content-class":"bg-grey-3",onMouseout:l[3]||(l[3]=()=>{(0,n.SU)(a).isRightDrawerOpen=!1}),onMouseover:l[4]||(l[4]=()=>{(0,n.SU)(a).isRightDrawerOpen=!0}),overlay:"","mini-to-overlay":""},{default:(0,t.w5)((()=>[(0,t.Wm)(C,{style:{height:"calc(100% - 150px)","margin-top":"150px","border-left":"1px solid #ddd"}},{default:(0,t.w5)((()=>[(0,t.Wm)(z,{padding:""},{default:(0,t.w5)((()=>[(0,t.wy)(((0,t.wg)(),(0,t.j4)(W,{clickable:"",to:"/user/profile/desktop",exact:""},{default:(0,t.w5)((()=>[(0,t.Wm)(S,{avatar:""},{default:(0,t.w5)((()=>[(0,t.Wm)(q,{name:"account_circle"})])),_:1}),(0,t.Wm)(S,null,{default:(0,t.w5)((()=>[(0,t.Uk)(" 个人中心 ")])),_:1})])),_:1})),[[N]]),(0,t.wy)(((0,t.wg)(),(0,t.j4)(W,{clickable:"",to:"/admin",exact:""},{default:(0,t.w5)((()=>[(0,t.Wm)(S,{avatar:""},{default:(0,t.w5)((()=>[(0,t.Wm)(q,{name:"admin_panel_settings"})])),_:1}),(0,t.Wm)(S,null,{default:(0,t.w5)((()=>[(0,t.Uk)(" 后台管理 ")])),_:1})])),_:1})),[[N]]),(0,t.wy)(((0,t.wg)(),(0,t.j4)(W,{clickable:"",onClick:O,exact:""},{default:(0,t.w5)((()=>[(0,t.Wm)(S,{avatar:""},{default:(0,t.w5)((()=>[(0,t.Wm)(q,{name:"exit_to_app"})])),_:1}),(0,t.Wm)(S,null,{default:(0,t.w5)((()=>[p])),_:1})])),_:1})),[[N]])])),_:1})])),_:1}),(0,t.Wm)(V,{class:"absolute-top",src:"https://cdn.quasar.dev/img/material.png",style:{height:"150px"}},{default:(0,t.w5)((()=>[(0,t._)("div",m,[(0,t.Wm)(R,{size:"100px"},{default:(0,t.w5)((()=>[(0,t._)("img",{alt:"avatar",src:L.value.avatar},null,8,h)])),_:1}),(0,t._)("div",f,[(0,t._)("div",b,(0,o.zw)(L.value.nickname?L.value.nickname:L.value.username),1),(0,t._)("div",w,(0,o.zw)(L.value.description),1)])])])),_:1})])),_:1},8,["modelValue"]),(0,t.Wm)(B,null,{default:(0,t.w5)((()=>[H.value?((0,t.wg)(),(0,t.j4)(j,{key:0})):(0,t.kq)("",!0)])),_:1})])),_:1})}}};var y=l(5291),q=l(4464),S=l(6453),k=l(6434),x=l(4411),W=l(6289),Z=l(9033),Q=l(5779),H=l(9403),z=l(4541),C=l(7784),L=l(6758),F=l(3251),O=l(9131),R=l(1909),V=l(2322),T=l(4743),j=l(6318),B=l(1458),D=l(9332),N=l.n(D);const P=(0,y.Z)(_,[["__scopeId","data-v-0891f0eb"]]),Y=P;N()(_,"components",{QLayout:q.Z,QHeader:S.Z,QToolbar:k.Z,QTabs:x.Z,QRouteTab:W.Z,QInput:Z.Z,QBtn:Q.Z,QSpace:H.Z,QDrawer:z.Z,QScrollArea:C.Z,QList:L.Z,QItem:F.Z,QItemSection:O.Z,QIcon:R.Z,QImg:V.Z,QAvatar:T.Z,QPageContainer:j.Z}),N()(_,"directives",{Ripple:B.Z})}}]);