"use strict";(globalThis["webpackChunkventus"]=globalThis["webpackChunkventus"]||[]).push([[70],{6453:(e,a,t)=>{t.d(a,{Z:()=>s});t(5954);var l=t(6929),i=t(7218),n=t(8532),o=t(859),r=t(8192),u=t(7623);const s=(0,o.L)({name:"QHeader",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,revealOffset:{type:Number,default:250},bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(e,{slots:a,emit:t}){const{proxy:{$q:o}}=(0,l.FN)(),s=(0,l.f3)(u.YE,u.qO);if(s===u.qO)return console.error("QHeader needs to be child of QLayout"),u.qO;const c=(0,i.iH)(parseInt(e.heightHint,10)),d=(0,i.iH)(!0),p=(0,l.Fl)((()=>!0===e.reveal||s.view.value.indexOf("H")>-1||o.platform.is.ios&&!0===s.isContainer.value)),v=(0,l.Fl)((()=>{if(!0!==e.modelValue)return 0;if(!0===p.value)return!0===d.value?c.value:0;const a=c.value-s.scroll.value.position;return a>0?a:0})),g=(0,l.Fl)((()=>!0!==e.modelValue||!0===p.value&&!0!==d.value)),m=(0,l.Fl)((()=>!0===e.modelValue&&!0===g.value&&!0===e.reveal)),h=(0,l.Fl)((()=>"q-header q-layout__section--marginal "+(!0===p.value?"fixed":"absolute")+"-top"+(!0===e.bordered?" q-header--bordered":"")+(!0===g.value?" q-header--hidden":"")+(!0!==e.modelValue?" q-layout--prevent-focus":""))),f=(0,l.Fl)((()=>{const e=s.rows.value.top,a={};return"l"===e[0]&&!0===s.left.space&&(a[!0===o.lang.rtl?"right":"left"]=`${s.left.size}px`),"r"===e[2]&&!0===s.right.space&&(a[!0===o.lang.rtl?"left":"right"]=`${s.right.size}px`),a}));function b(e,a){s.update("header",e,a)}function w(e,a){e.value!==a&&(e.value=a)}function y({height:e}){w(c,e),b("size",e)}function _(e){!0===m.value&&w(d,!0),t("focusin",e)}(0,l.YP)((()=>e.modelValue),(e=>{b("space",e),w(d,!0),s.animate()})),(0,l.YP)(v,(e=>{b("offset",e)})),(0,l.YP)((()=>e.reveal),(a=>{!1===a&&w(d,e.modelValue)})),(0,l.YP)(d,(e=>{s.animate(),t("reveal",e)})),(0,l.YP)(s.scroll,(a=>{!0===e.reveal&&w(d,"up"===a.direction||a.position<=e.revealOffset||a.position-a.inflectionPoint<100)}));const q={};return s.instances.header=q,!0===e.modelValue&&b("size",c.value),b("space",e.modelValue),b("offset",v.value),(0,l.Jd)((()=>{s.instances.header===q&&(s.instances.header=void 0,b("size",0),b("offset",0),b("space",!1))})),()=>{const t=(0,r.Bl)(a.default,[]);return!0===e.elevated&&t.push((0,l.h)("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),t.push((0,l.h)(n.Z,{debounce:0,onResize:y})),(0,l.h)("header",{class:h.value,style:f.value,onFocusin:_},t)}}})},2322:(e,a,t)=>{t.d(a,{Z:()=>p});t(5954);var l=t(7218),i=t(6929),n=t(8689),o=t(3578);const r={ratio:[String,Number]};function u(e,a){return(0,i.Fl)((()=>{const t=Number(e.ratio||(void 0!==a?a.value:void 0));return!0!==isNaN(t)&&t>0?{paddingBottom:100/t+"%"}:null}))}var s=t(859),c=t(8192);const d=16/9,p=(0,s.L)({name:"QImg",props:{...r,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:d},placeholderSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:a,emit:t}){const r=(0,l.iH)(e.initialRatio),s=u(e,r);let d=null,p=!1;const v=[(0,l.iH)(null),(0,l.iH)(q())],g=(0,l.iH)(0),m=(0,l.iH)(!1),h=(0,l.iH)(!1),f=(0,i.Fl)((()=>`q-img q-img--${!0===e.noNativeMenu?"no-":""}menu`)),b=(0,i.Fl)((()=>({width:e.width,height:e.height}))),w=(0,i.Fl)((()=>"q-img__image "+(void 0!==e.imgClass?e.imgClass+" ":"")+`q-img__image--with${!0===e.noTransition?"out":""}-transition`)),y=(0,i.Fl)((()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position})));function _(){return e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null}function q(){return void 0!==e.placeholderSrc?{src:e.placeholderSrc}:null}function S(e){null!==d&&(clearTimeout(d),d=null),h.value=!1,null===e?(m.value=!1,v[1^g.value].value=q()):m.value=!0,v[g.value].value=e}function k({target:e}){!0!==p&&(null!==d&&(clearTimeout(d),d=null),r.value=0===e.naturalHeight?.5:e.naturalWidth/e.naturalHeight,x(e,1))}function x(e,a){!0!==p&&1e3!==a&&(!0===e.complete?Z(e):d=setTimeout((()=>{d=null,x(e,a+1)}),50))}function Z(e){!0!==p&&(g.value=1^g.value,v[g.value].value=null,m.value=!1,h.value=!1,t("load",e.currentSrc||e.src))}function Q(e){null!==d&&(clearTimeout(d),d=null),m.value=!1,h.value=!0,v[g.value].value=null,v[1^g.value].value=q(),t("error",e)}function W(a){const t=v[a].value,l={key:"img_"+a,class:w.value,style:y.value,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,...t};return g.value===a?(l.class+=" q-img__image--waiting",Object.assign(l,{onLoad:k,onError:Q})):l.class+=" q-img__image--loaded",(0,i.h)("div",{class:"q-img__container absolute-full",key:"img"+a},(0,i.h)("img",l))}function H(){return!0!==m.value?(0,i.h)("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},(0,c.KR)(a[!0===h.value?"error":"default"])):(0,i.h)("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},void 0!==a.loading?a.loading():!0===e.noSpinner?void 0:[(0,i.h)(o.Z,{color:e.spinnerColor,size:e.spinnerSize})])}return(0,i.YP)((()=>_()),S),S(_()),(0,i.Jd)((()=>{p=!0,null!==d&&(clearTimeout(d),d=null)})),()=>{const a=[];return null!==s.value&&a.push((0,i.h)("div",{key:"filler",style:s.value})),!0!==h.value&&(null!==v[0].value&&a.push(W(0)),null!==v[1].value&&a.push(W(1))),a.push((0,i.h)(n.uT,{name:"q-transition--fade"},H)),(0,i.h)("div",{class:f.value,style:b.value,role:"img","aria-label":e.alt},a)}}})},9403:(e,a,t)=>{t.d(a,{Z:()=>o});var l=t(6929),i=t(859);const n=(0,l.h)("div",{class:"q-space"}),o=(0,i.L)({name:"QSpace",setup(){return()=>n}})},7733:(e,a,t)=>{t.d(a,{v:()=>i});var l=t(8910);const i=(0,l.Q_)("MainLayoutStore",{state:()=>({isRightDrawerOpen:!1,id:null})})},6196:(e,a,t)=>{t.d(a,{Z:()=>d});var l=t(6929),i=t(80),n=t(7218),o=t(8910);const r=(0,o.Q_)("RecordStore",{state:()=>({RecordNumber:"浙ICP备2023031873号-1"})}),u={href:"http://beian.miit.gov.cn",target:"_blank"},s={__name:"RecordShow",setup(e){const a=r();return(e,t)=>((0,l.wg)(),(0,l.iD)("a",u,(0,i.zw)((0,n.SU)(a).RecordNumber),1))}},c=s,d=c},70:(e,a,t)=>{t.r(a),t.d(a,{default:()=>M});t(5954);var l=t(6929),i=t(8689),n=t(7218),o=t(80),r=t(1944),u=t(8455),s=t(9482),c=t(7733),d=t(6196),p=t(3513),v=t(8910);const g=e=>((0,l.dD)("data-v-7c9c72eb"),e=e(),(0,l.Cn)(),e),m=g((()=>(0,l._)("div",{class:"q-mx-md"},null,-1))),h=g((()=>(0,l._)("div",{class:"text-red text-weight-bold"},"注销",-1))),f={class:"bg-transparent row justify-between",style:{height:"150px",width:"300px"}},b=["src"],w={class:"text-right q-ma-md"},y={class:"text-h6 text-weight-bold"},_={class:"text-subtitle2 q-mt-md"},q=g((()=>(0,l._)("div",{class:"text-caption1 text-grey-8"},"© 2023 风唤长河",-1))),S={__name:"MainLayoutDesktop",setup(e){const a=(0,c.v)(),t=(0,p.t)(),g=()=>{S.push("/login")},S=(0,u.tv)(),k=(0,r.Z)(),{checkAndSetAuth:x,logout:Z}=t;(0,l.bv)((async()=>{await x(),F.value&&O()}));const Q=(0,n.iH)((0,l.Fl)((()=>a.isRightDrawerOpen))),W=(0,n.iH)("");(0,l.JJ)("keyword",W);const H=(0,n.iH)(""),z=()=>{W.value=H.value,H.value="",C(),S.push({path:"/blog"})},R=(0,n.iH)(!0),C=()=>{R.value=!1,(0,l.Y3)((()=>{R.value=!0}))},{isAuthenticated:F}=(0,v.Jk)(t);(0,l.YP)(F,(e=>{switch(e){case!0:O();break;case!1:D.value.username="",D.value.avatar=null,D.value.description="",D.value.nickname="";break;default:k.notify({message:"未知错误",icon:"warning",color:"red",position:"top"});break}}));const O=()=>{s.userApi.get("/user/self/").then((e=>{D.value.username=e.data.username,D.value.avatar=e.data.avatar,D.value.description=e.data.description,D.value.nickname=e.data.nickname})),s.userApi.get("/user/route/desktop/").then((e=>{console.log(e),V.value=e.data}))},V=(0,n.iH)([]),D=(0,n.iH)({username:"",avatar:null,description:""}),T=()=>{F.value?a.isRightDrawerOpen=!a.isRightDrawerOpen:(k.notify({message:"请先登录",icon:"warning",color:"red",position:"top"}),g())},j=()=>{a.isRightDrawerOpen=!1,k.notify({message:"确定要退出登录吗？",color:"white",icon:"warning",textColor:"black",position:"center",actions:[{label:"取消",color:"black"},{label:"确定",color:"primary",handler:()=>{Z(S)}}]})};return(e,t)=>{const r=(0,l.up)("q-route-tab"),u=(0,l.up)("q-tabs"),s=(0,l.up)("q-btn"),c=(0,l.up)("q-input"),p=(0,l.up)("q-space"),v=(0,l.up)("q-toolbar"),S=(0,l.up)("q-header"),k=(0,l.up)("q-icon"),x=(0,l.up)("q-item-section"),Z=(0,l.up)("q-item"),W=(0,l.up)("q-list"),C=(0,l.up)("q-scroll-area"),O=(0,l.up)("q-avatar"),B=(0,l.up)("q-img"),N=(0,l.up)("q-drawer"),P=(0,l.up)("router-view"),L=(0,l.up)("q-footer"),Y=(0,l.up)("q-page-container"),I=(0,l.up)("q-layout"),U=(0,l.Q2)("ripple");return(0,l.wg)(),(0,l.j4)(I,{class:"non-selectable bg-grey-3",view:"hHr LpR ffr"},{default:(0,l.w5)((()=>[(0,l.Wm)(S,{class:"bg-transparent",elevated:"",style:{"backdrop-filter":"blur(10px)"}},{default:(0,l.w5)((()=>[(0,l.Wm)(v,{class:"text-black justify-center"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{"inline-label":""},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{exact:"",icon:"home",label:"首页",to:"/"}),(0,l.Wm)(r,{exact:"",icon:"group",label:"友链",to:"/friend"}),(0,l.Wm)(r,{exact:"",icon:"menu_book",label:"博文列表",to:"/blog"}),(0,l.Wm)(r,{exact:"",icon:"videogame_asset",label:"游戏",to:"/game"})])),_:1}),m,(0,l.Wm)(c,{ref:"input",modelValue:H.value,"onUpdate:modelValue":t[0]||(t[0]=e=>H.value=e),color:"primary",dense:"",outlined:"",placeholder:"搜索",onBlur:z,onKeyup:(0,i.D2)(z,["enter"])},{prepend:(0,l.w5)((()=>[(0,l.Wm)(s,{color:"primary",icon:"search",round:"",size:"sm",onClick:z})])),_:1},8,["modelValue","onKeyup"]),(0,l.Wm)(p),(0,l.Wm)(i.uT,{mode:"out-in",name:"fade"},{default:(0,l.w5)((()=>[(0,n.SU)(F)?((0,l.wg)(),(0,l.j4)(s,{key:0,class:"q-ml-md",flat:"",icon:"account_circle",label:"帐号",onClick:T})):((0,l.wg)(),(0,l.j4)(s,{key:1,class:"q-ml-md",flat:"",icon:"account_circle",label:"登录",onClick:g}))])),_:1})])),_:1})])),_:1}),(0,l.Wm)(N,{modelValue:Q.value,"onUpdate:modelValue":t[1]||(t[1]=e=>Q.value=e),width:300,bordered:"","content-class":"bg-grey-3",elevated:"","mini-to-overlay":"",overlay:"",side:"right",onMouseout:t[2]||(t[2]=()=>{(0,n.SU)(a).isRightDrawerOpen=!1}),onMouseover:t[3]||(t[3]=()=>{(0,n.SU)(a).isRightDrawerOpen=!0}),onClickCapture:t[4]||(t[4]=()=>{(0,n.SU)(a).isRightDrawerOpen=!1})},{default:(0,l.w5)((()=>[(0,l.Wm)(C,{style:{height:"calc(100% - 150px)","margin-top":"150px","border-left":"1px solid #ddd"}},{default:(0,l.w5)((()=>[(0,l.Wm)(W,{padding:""},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(V.value,(e=>(0,l.wy)(((0,l.wg)(),(0,l.j4)(Z,{clickable:"",exact:"",to:e.path,key:e.path},{default:(0,l.w5)((()=>[(0,l.Wm)(x,{avatar:""},{default:(0,l.w5)((()=>[(0,l.Wm)(k,{name:e.icon},null,8,["name"])])),_:2},1024),(0,l.Wm)(x,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.name),1)])),_:2},1024)])),_:2},1032,["to"])),[[U]]))),128)),(0,l.wy)(((0,l.wg)(),(0,l.j4)(Z,{clickable:"",exact:"",onClick:j},{default:(0,l.w5)((()=>[(0,l.Wm)(x,{avatar:""},{default:(0,l.w5)((()=>[(0,l.Wm)(k,{name:"exit_to_app"})])),_:1}),(0,l.Wm)(x,null,{default:(0,l.w5)((()=>[h])),_:1})])),_:1})),[[U]])])),_:1})])),_:1}),(0,l.Wm)(B,{class:"absolute-top",src:"https://cdn.quasar.dev/img/material.png",style:{height:"150px"}},{default:(0,l.w5)((()=>[(0,l._)("div",f,[(0,l.Wm)(O,{size:"80px"},{default:(0,l.w5)((()=>[(0,l._)("img",{src:D.value.avatar,alt:"avatar"},null,8,b)])),_:1}),(0,l._)("div",w,[(0,l._)("div",y,(0,o.zw)(D.value.nickname?D.value.nickname:D.value.username),1),(0,l._)("div",_,(0,o.zw)(D.value.description),1)])])])),_:1})])),_:1},8,["modelValue"]),(0,l.Wm)(Y,null,{default:(0,l.w5)((()=>[R.value?((0,l.wg)(),(0,l.j4)(P,{key:0})):(0,l.kq)("",!0),(0,l.Wm)(L,{class:"flex flex-center bg-grey-3",style:{height:"50px"}},{default:(0,l.w5)((()=>[q,(0,l.Wm)(d.Z,{class:"text-caption1 text-grey-8 q-mx-md"})])),_:1})])),_:1})])),_:1})}}};var k=t(5291),x=t(4464),Z=t(6453),Q=t(6434),W=t(4411),H=t(6289),z=t(9033),R=t(5779),C=t(9403),F=t(4541),O=t(7784),V=t(6758),D=t(3251),T=t(9131),j=t(1909),B=t(2322),N=t(4743),P=t(6318),L=t(5024),Y=t(1458),I=t(9332),U=t.n(I);const A=(0,k.Z)(S,[["__scopeId","data-v-7c9c72eb"]]),M=A;U()(S,"components",{QLayout:x.Z,QHeader:Z.Z,QToolbar:Q.Z,QTabs:W.Z,QRouteTab:H.Z,QInput:z.Z,QBtn:R.Z,QSpace:C.Z,QDrawer:F.Z,QScrollArea:O.Z,QList:V.Z,QItem:D.Z,QItemSection:T.Z,QIcon:j.Z,QImg:B.Z,QAvatar:N.Z,QPageContainer:P.Z,QFooter:L.Z}),U()(S,"directives",{Ripple:Y.Z})}}]);