"use strict";(globalThis["webpackChunkventusblog"]=globalThis["webpackChunkventusblog"]||[]).push([[70],{1944:(e,a,t)=>{t.d(a,{Z:()=>i});var l=t(6929),o=t(7623);function i(){return(0,l.f3)(o.Ng)}},7733:(e,a,t)=>{t.d(a,{v:()=>o});var l=t(8910);const o=(0,l.Q_)("MainLayoutStore",{state:()=>({isRightDrawerOpen:!1,id:null})})},70:(e,a,t)=>{t.r(a),t.d(a,{default:()=>z});t(5954);var l=t(6929),o=t(80),i=t(1944),n=t(8455),r=t(7493),u=t(7218),s=t(9482),c=t(7733);const d=(0,l._)("div",{class:"q-mx-md"},null,-1),m=(0,l._)("div",{class:"text-red text-weight-bold"},"Exit",-1),p={class:"bg-transparent row justify-between",style:{height:"150px",width:"300px"}},g=["src"],v={class:"text-right q-ma-md"},w={class:"text-h6 text-weight-bold"},b={class:"text-subtitle2 q-mt-md"},h={__name:"MainLayoutDesktop",setup(e){const a=(0,c.v)(),t=(0,r.r)(),h=()=>{_.push("/login")},f=()=>{_.push("/"),t.logout(),t.isLogged=!1},_=(0,n.tv)(),k=(0,i.Z)(),x=()=>{t.checkLogged().then((e=>{"token valid"===e?t.isLogged=!0:(t.logout(),t.isLogged=!1)}))};(0,l.bv)((()=>{x()}));const y=(0,u.iH)((0,l.Fl)((()=>t.isLogged))),W=(0,u.iH)((0,l.Fl)((()=>a.isRightDrawerOpen)));(0,l.JJ)("isLogged",y);const q=(0,u.iH)("");(0,l.JJ)("keyword",q);const Z=(0,u.iH)(""),Q=()=>{q.value=Z.value,Z.value="",C.value=!1,j(),_.push({path:"/blog"})},L=(0,u.iH)(!0),j=()=>{L.value=!1,(0,l.Y3)((()=>{L.value=!0}))},C=(0,u.iH)(!1);(0,l.YP)(W,(()=>{!1===y.value?(a.isRightDrawerOpen.value=!1,setTimeout((()=>{k.notify({message:"请先登录",icon:"warning",color:"red",position:"top"}),_.push({path:"/login"})}),200)):s.userApi.get("/user/self/").then((e=>{console.log(e),H.value.username=e.data.username,H.value.avatar=e.data.avatar,H.value.description=e.data.description,H.value.nickname=e.data.nickname}))}));const H=(0,u.iH)({username:"",avatar:null,description:""}),R=()=>{y.value?a.isRightDrawerOpen=!a.isRightDrawerOpen:(k.notify({message:"请先登录",icon:"warning",color:"red",position:"top"}),h())},D=()=>{a.isRightDrawerOpen=!1,k.notify({message:"确定要退出登录吗？",color:"white",icon:"warning",textColor:"black",position:"center",actions:[{label:"取消",color:"black"},{label:"确定",color:"primary",handler:()=>{f()}}]})};return(e,a)=>{const t=(0,l.up)("q-route-tab"),i=(0,l.up)("q-tabs"),n=(0,l.up)("q-btn"),r=(0,l.up)("q-input"),u=(0,l.up)("q-toolbar"),s=(0,l.up)("q-header"),c=(0,l.up)("q-icon"),h=(0,l.up)("q-item-section"),f=(0,l.up)("q-item"),_=(0,l.up)("q-list"),k=(0,l.up)("q-scroll-area"),x=(0,l.up)("q-avatar"),y=(0,l.up)("q-img"),q=(0,l.up)("q-drawer"),j=(0,l.up)("router-view"),O=(0,l.up)("q-page-container"),T=(0,l.up)("q-layout"),V=(0,l.Q2)("ripple");return(0,l.wg)(),(0,l.j4)(T,{view:"hHr LpR ffr",class:"non-selectable bg-grey-3"},{default:(0,l.w5)((()=>[(0,l.Wm)(s,{elevated:"",style:{"backdrop-filter":"blur(10px)"},class:"bg-transparent"},{default:(0,l.w5)((()=>[C.value?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(u,{key:0,class:"text-black justify-center"},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{"inline-label":""},{default:(0,l.w5)((()=>[(0,l.Wm)(t,{icon:"home",to:"/",exact:"",label:"简介"}),(0,l.Wm)(t,{icon:"group",to:"/friend",exact:"",label:"友链"}),(0,l.Wm)(t,{icon:"menu_book",to:"/blog",exact:"",label:"博文列表"}),(0,l.Wm)(t,{icon:"videogame_asset",to:"/game",exact:"",label:"游戏"})])),_:1}),d,(0,l.Wm)(r,{ref:"input",modelValue:Z.value,"onUpdate:modelValue":a[0]||(a[0]=e=>Z.value=e),color:"primary",dense:"",outlined:"",placeholder:"Search"},{prepend:(0,l.w5)((()=>[(0,l.Wm)(n,{round:"",icon:"search",color:"primary",onClick:Q,size:"sm"})])),_:1},8,["modelValue"]),(0,l.Wm)(n,{flat:"",icon:"account_circle",onClick:R,class:"q-ml-md",label:"帐号"})])),_:1}))])),_:1}),(0,l.Wm)(q,{modelValue:W.value,"onUpdate:modelValue":a[1]||(a[1]=e=>W.value=e),width:300,side:"right",elevated:"",overlay:""},{default:(0,l.w5)((()=>[(0,l.Wm)(k,{style:{height:"calc(100% - 150px)","margin-top":"150px","border-left":"1px solid #ddd"}},{default:(0,l.w5)((()=>[(0,l.Wm)(_,{padding:""},{default:(0,l.w5)((()=>[(0,l.wy)(((0,l.wg)(),(0,l.j4)(f,{clickable:"",to:"/user/profile",exact:""},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{avatar:""},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{name:"account_circle"})])),_:1}),(0,l.Wm)(h,null,{default:(0,l.w5)((()=>[(0,l.Uk)(" My Profile ")])),_:1})])),_:1})),[[V]]),(0,l.wy)(((0,l.wg)(),(0,l.j4)(f,{clickable:"",to:"/user/comment",exact:""},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{avatar:""},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{name:"comment"})])),_:1}),(0,l.Wm)(h,null,{default:(0,l.w5)((()=>[(0,l.Uk)(" My Comments ")])),_:1})])),_:1})),[[V]]),(0,l.wy)(((0,l.wg)(),(0,l.j4)(f,{clickable:"",to:"/user/statistics",exact:""},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{avatar:""},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{name:"bar_chart"})])),_:1}),(0,l.Wm)(h,null,{default:(0,l.w5)((()=>[(0,l.Uk)(" Comment statistics ")])),_:1})])),_:1})),[[V]]),(0,l.wy)(((0,l.wg)(),(0,l.j4)(f,{clickable:"",onClick:D,exact:""},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{avatar:""},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{name:"exit_to_app"})])),_:1}),(0,l.Wm)(h,null,{default:(0,l.w5)((()=>[m])),_:1})])),_:1})),[[V]])])),_:1})])),_:1}),(0,l.Wm)(y,{class:"absolute-top",src:"https://cdn.quasar.dev/img/material.png",style:{height:"150px"}},{default:(0,l.w5)((()=>[(0,l._)("div",p,[(0,l.Wm)(x,{size:"100px"},{default:(0,l.w5)((()=>[(0,l._)("img",{alt:"avatar",src:H.value.avatar?H.value.avatar:"https://cdn.quasar.dev/img/avatar.png"},null,8,g)])),_:1}),(0,l._)("div",v,[(0,l._)("div",w,(0,o.zw)(H.value.nickname?H.value.nickname:H.value.username),1),(0,l._)("div",b,(0,o.zw)(H.value.description),1)])])])),_:1})])),_:1},8,["modelValue"]),(0,l.Wm)(O,null,{default:(0,l.w5)((()=>[L.value?((0,l.wg)(),(0,l.j4)(j,{key:0})):(0,l.kq)("",!0)])),_:1})])),_:1})}}};var f=t(4464),_=t(6453),k=t(6434),x=t(4411),y=t(6289),W=t(9033),q=t(5779),Z=t(4541),Q=t(7784),L=t(6758),j=t(3251),C=t(9131),H=t(1909),R=t(2322),D=t(4743),O=t(6318),T=t(1458),V=t(9332),I=t.n(V);const U=h,z=U;I()(h,"components",{QLayout:f.Z,QHeader:_.Z,QToolbar:k.Z,QTabs:x.Z,QRouteTab:y.Z,QInput:W.Z,QBtn:q.Z,QDrawer:Z.Z,QScrollArea:Q.Z,QList:L.Z,QItem:j.Z,QItemSection:C.Z,QIcon:H.Z,QImg:R.Z,QAvatar:D.Z,QPageContainer:O.Z}),I()(h,"directives",{Ripple:T.Z})}}]);