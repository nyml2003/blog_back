"use strict";(globalThis["webpackChunkventusblog"]=globalThis["webpackChunkventusblog"]||[]).push([[8804],{8804:(e,a,n)=>{n.r(a),n.d(a,{default:()=>h});var o=n(6929),t=n(80),l=n(1944),i=n(7218),r=n(9482);const s=["src"],c={key:1},p=["href"],g={__name:"UserManage",setup(e){const a=(0,l.Z)(),n=(0,i.iH)([]),g=(0,i.iH)(!1),u=()=>{g.value=!0,console.log(d.pagination.value),r.userApi.get("/user/rest/",{params:{page:d.pagination.value.page,page_size:d.pagination.value.rowsPerPage}}).then((e=>{n.value=e.data.results,d.pagination.value.rowsNumber=e.data.count,console.log(e.data)})),g.value=!1},d={loading:(0,i.iH)(!1),columns:[{name:"id",label:"ID",field:"id",align:"center"},{name:"nickname",label:"昵称",field:"nickname",align:"center"},{name:"avatar",label:"头像",field:"avatar",align:"center"},{name:"email",label:"邮箱",field:"email",align:"center"},{name:"telephone",label:"电话",field:"telephone",align:"center"},{name:"description",label:"描述",field:"description",align:"center"},{name:"created_at",label:"创建时间",field:"created_at",format:e=>(new Date).toLocaleString(),align:"center"},{name:"updated_at",label:"更新时间",field:"updated_at",align:"center",format:e=>(new Date).toLocaleString()},{name:"operation",label:"操作",field:"operation",align:"center"}],pagination:(0,i.iH)({sortBy:"id",descending:!1,page:1,rowsNumber:0,rowsPerPage:7}),onRequest:function(e){console.log(e);const{page:a,rowsPerPage:n}=e.pagination;d.pagination.value.page=a,d.pagination.value.rowsPerPage=n,u()}};function m(e){a.notify({message:"删除中",color:"warning",textColor:"black",icon:"warning",position:"center",actions:[{label:"取消",color:"black",handler:()=>{a.notify({message:"取消删除",color:"negative",icon:"close",position:"top",timeout:1e3})}},{label:"确定",color:"red",handler:()=>{w(e)}}]})}function w(e){r.userApi.delete(`/user/rest/${e}/`).then((e=>{console.log(e),a.notify({message:"删除成功",color:"positive",icon:"check",position:"top",timeout:1e3}),u()})).catch((e=>{console.log(e)}))}return(0,o.bv)((()=>{u()})),(e,a)=>{const l=(0,o.up)("q-td"),i=(0,o.up)("q-btn"),r=(0,o.up)("q-table"),g=(0,o.up)("q-card-section");return(0,o.wg)(),(0,o.j4)(g,null,{default:(0,o.w5)((()=>[(0,o.Wm)(r,{columns:d.columns,rows:n.value,pagination:d.pagination.value,"onUpdate:pagination":a[0]||(a[0]=e=>d.pagination.value=e),onRequest:d.onRequest,"row-key":"id",loading:d.loading.value,"binary-state-sort":"",separator:"cell","rows-per-page-options":[7,10,15],"visible-columns":["id","nickname","email","telephone","avatar","description","created_at","updated_at","operation"]},{"body-cell-avatar":(0,o.w5)((e=>[(0,o.Wm)(l,{props:e},{default:(0,o.w5)((()=>[e.row.avatar?((0,o.wg)(),(0,o.iD)("img",{key:0,src:`${e.row.avatar}`,style:{width:"50px",height:"50px","border-radius":"50%"},alt:"图片加载失败"},null,8,s)):((0,o.wg)(),(0,o.iD)("div",c,"无"))])),_:2},1032,["props"])])),"body-cell-url":(0,o.w5)((e=>[(0,o.Wm)(l,{props:e},{default:(0,o.w5)((()=>[(0,o._)("a",{href:e.row.url,target:"_blank"},(0,t.zw)(e.row.url),9,p)])),_:2},1032,["props"])])),"body-cell-operation":(0,o.w5)((e=>[(0,o.Wm)(l,{props:e},{default:(0,o.w5)((()=>[(0,o.Wm)(i,{dense:"",round:"",icon:"delete",class:"q-mx-sm",color:"negative",onClick:a=>m(e.row.id)},null,8,["onClick"])])),_:2},1032,["props"])])),_:1},8,["columns","rows","pagination","onRequest","loading"])])),_:1})}}};var u=n(7392),d=n(5541),m=n(1236),w=n(5779),b=n(9332),v=n.n(b);const f=g,h=f;v()(g,"components",{QCardSection:u.Z,QTable:d.Z,QTd:m.Z,QBtn:w.Z})}}]);