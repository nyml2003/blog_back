"use strict";(globalThis["webpackChunkventus"]=globalThis["webpackChunkventus"]||[]).push([[8804],{8804:(e,a,n)=>{n.r(a),n.d(a,{default:()=>h});var t=n(6929),o=n(80),i=n(1944),l=n(7218),r=n(9482);const s=["src"],c={key:1},p=["href"],u={__name:"UserManage",setup(e){const a=(0,i.Z)(),n=(0,l.iH)([]),u=(0,l.iH)(!1),d=()=>{u.value=!0,r.userApi.get("/user/rest/",{params:{page:g.pagination.value.page,page_size:g.pagination.value.rowsPerPage}}).then((e=>{n.value=e.data.results,g.pagination.value.rowsNumber=e.data.count})),u.value=!1},g={loading:(0,l.iH)(!1),columns:[{name:"id",label:"ID",field:"id",align:"center"},{name:"nickname",label:"昵称",field:"nickname",align:"center"},{name:"avatar",label:"头像",field:"avatar",align:"center"},{name:"email",label:"邮箱",field:"email",align:"center"},{name:"telephone",label:"电话",field:"telephone",align:"center"},{name:"description",label:"描述",field:"description",align:"center"},{name:"created_at",label:"创建时间",field:"created_at",format:e=>(new Date).toLocaleString(),align:"center"},{name:"updated_at",label:"更新时间",field:"updated_at",align:"center",format:e=>(new Date).toLocaleString()},{name:"operation",label:"操作",field:"operation",align:"center"}],pagination:(0,l.iH)({sortBy:"id",descending:!1,page:1,rowsNumber:0,rowsPerPage:7}),onRequest:function(e){const{page:a,rowsPerPage:n}=e.pagination;g.pagination.value.page=a,g.pagination.value.rowsPerPage=n,d()}};function m(e){a.notify({message:"删除中",color:"warning",textColor:"black",icon:"warning",position:"center",actions:[{label:"取消",color:"black",handler:()=>{a.notify({message:"取消删除",color:"negative",icon:"close",position:"top",timeout:1e3})}},{label:"确定",color:"red",handler:()=>{w(e)}}]})}function w(e){r.userApi.delete(`/user/rest/${e}/`).then((e=>{a.notify({message:"删除成功",color:"positive",icon:"check",position:"top",timeout:1e3}),d()})).catch((e=>{console.log(e)}))}return(0,t.bv)((()=>{d()})),(e,a)=>{const i=(0,t.up)("q-td"),l=(0,t.up)("q-btn"),r=(0,t.up)("q-table"),u=(0,t.up)("q-card-section");return(0,t.wg)(),(0,t.j4)(u,null,{default:(0,t.w5)((()=>[(0,t.Wm)(r,{columns:g.columns,rows:n.value,pagination:g.pagination.value,"onUpdate:pagination":a[0]||(a[0]=e=>g.pagination.value=e),onRequest:g.onRequest,"row-key":"id",loading:g.loading.value,"binary-state-sort":"",separator:"cell","rows-per-page-options":[7,10,15],"visible-columns":["id","nickname","email","telephone","avatar","description","created_at","updated_at","operation"]},{"body-cell-avatar":(0,t.w5)((e=>[(0,t.Wm)(i,{props:e},{default:(0,t.w5)((()=>[e.row.avatar?((0,t.wg)(),(0,t.iD)("img",{key:0,src:`${e.row.avatar}`,style:{width:"50px",height:"50px","border-radius":"50%"},alt:"图片加载失败"},null,8,s)):((0,t.wg)(),(0,t.iD)("div",c,"无"))])),_:2},1032,["props"])])),"body-cell-url":(0,t.w5)((e=>[(0,t.Wm)(i,{props:e},{default:(0,t.w5)((()=>[(0,t._)("a",{href:e.row.url,target:"_blank"},(0,o.zw)(e.row.url),9,p)])),_:2},1032,["props"])])),"body-cell-operation":(0,t.w5)((e=>[(0,t.Wm)(i,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(l,{dense:"",round:"",icon:"delete",class:"q-mx-sm",color:"negative",onClick:a=>m(e.row.id)},null,8,["onClick"])])),_:2},1032,["props"])])),_:1},8,["columns","rows","pagination","onRequest","loading"])])),_:1})}}};var d=n(7392),g=n(5541),m=n(1236),w=n(5779),b=n(9332),v=n.n(b);const f=u,h=f;v()(u,"components",{QCardSection:d.Z,QTable:g.Z,QTd:m.Z,QBtn:w.Z})}}]);